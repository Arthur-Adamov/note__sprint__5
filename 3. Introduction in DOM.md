# DOM: выбор элементов

Чтобы посмотреть на DOM, откройте в инструментах разработчика вкладку ”Elements“. То, что вы увидите, очень похоже на разметку веб-страницы. Но это не совсем так: на самом деле вы смотрите не на теги, а на элементы DOM-дерева. Отсюда и название вкладки.

Любое ветвление дерева называют узлом. Он возникает там, где есть:
* открывающий тег;
* текст;
* HTML-комментарий.

Обратите внимание: **узел** — более ёмкое понятие, чем элемент. **Элемент** — то, что мы называем тегом: он может быть парным или одиночным. 

* ```<img>``` или ```<a></a>``` — элемент.
* Текст <a>находящийся внутри ссылки ```</a>``` — текстовый узел.
* Набор тегов ```<a></a>``` — узел.

Узел — это все сущности, которые мы можем увидеть на странице, в том числе и элементы. Текст, комментарии, теги — это узлы.


## Поиск элементов в DOM-дереве

Научимся искать элементы в DOM-дереве. Будем работать с методами: ```querySelector``` и ```querySelectorAll```.
Оба метода принимают на вход строку — селектор нужного элемента. Удобно, что аргументы нужно писать так же, как в CSS:

```js
<!-- index.html -->

<main id="container">
  <div class="content">
    <div class="content__item"></div>
    <div class="content__item"></div>
    <div class="content__item"></div>
  </div>
</main> 
```

```js
/* script.js */

// Для выбора элемента по идентификатору
let container = document.querySelector('#container');

// По имени класса
let content = container.querySelector('.content');

/* Обратите внимание: мы ищем элементы не по всему
DOM-дереву, а внутри уже найденного элемента */
let contentItems = content.querySelectorAll('.content__item'); 
```

Если передать класс как аргумент методу ```querySelector```, метод вернёт первый на странице элемент с этим классом (тот, что выше в вёрстке). 

```querySelectorAll``` вернёт все подходящие под селектор элементы.

Главное преимущество этих методов — возможность искать элементы по сложным составным селекторам:

```js
<!-- index.html -->

<section class="bag">
  <div class="item">
    Очешник
        <p>Очки</p>
    </div>
  <p class="item">Расчёска</p>
  <p class="item">Зеркальце</p>
  <div class="item bag">Косметичка
    <p class="item">Помада</p>
    <p class="item">Тушь</p>
  </div>
  <p class="item wallet">Бумажник</div>
</section> 
```

```js
/* script.js */

let cosmeticBagContent = document.querySelectorAll('section.bag div.bag .item');
console.log(cosmeticBagContent); // Будут выбраны помада и тушь 
```

Методы ```querySelector``` и ```querySelectorAll``` могут искать элементы не только у объектов, но у других элеменентов (например в переменных).

---

# Атрибуты и их методы

У тегов есть атрибуты: ```href``` у ```<a>```, ```src``` у ```<img>```, ```class``` у любого тега. Управляя атрибутами, вы управляете самими элементами: отмечаете, какой элемент показать и какой скрыть, определяете размеры блоков, их расположение.

Управлять атрибутами можно:

* вызовом специальных методов;
* заменой атрибута через свойство DOM-элемента;
* обращением к специальным свойствам.

С атрибутом HTML-элемента можно выполнить одно из четырёх действий:

* получить значение;
* изменить значение;
* проверить наличие;
* удалить атрибут.

## Получаем значение атрибута: метод ```getAttribute```

Метод ```getAttribute``` принимает на вход имя атрибута и возвращает его значение:

```js
/* получаем первый элемент в DOM, описанный тегом <img>,
т. е. первое изображение на странице */

let imageOnPage = document.querySelector('img');

imageOnPage.getAttribute('src'); // вернётся ссылка, записанная в атрибуте src первого изображения, которое вернул метод querySelector 
```

Если у элемента нет атрибута, который мы запросили, или подобного атрибута не существует вовсе, вернётся специальное значение **null**. Если атрибут задан, но не подразумевает значения, например, ```disabled```, мы получим пустую строку:

```js
<button id="big-red-button" onclick="alert('Бум!');" disabled>
  Кнопка самоуничтожения
</button> 
```

```js
// получаем по идентификатору кнопку и сохраняем в переменной bigAndRed
let bigAndRed = document.querySelector('#big-red-button');

// исследуем элемент-кнопку методом getAttribute
bigAndRed.getAttribute('lang'); // null
bigAndRed.getAttribute('несуществующий атрибут'); // null
bigAndRed.getAttribute('disabled'); // '' 
```

## Проверяем, есть ли у тега атрибут: метод ```hasAttribute```

Убедиться в наличии атрибута удобно методом ```hasAttribute```, который возвращает ```true```, если атрибут задан, и ```false```, если нет.

```js
bigAndRed.hasAttribute('onclick'); // true
bigAndRed.hasAttribute('несуществующий атрибут'); // false
bigAndRed.hasAttribute('disabled'); // true 
```

## Задаём значение атрибута: метод ```setAttribute```

Метод ```setAttribute``` принимает на вход два аргумента: имя атрибута, значение которого мы хотим задать, и само значение:

```js
bigAndRed.setAttribute('lang', 'ru');
сonsole.log(bigAndRed.hasAttribute('lang')); //true 
```

Оба аргумента — **строки**. Если передать значение другого типа, оно всё равно будет приведено к строке.

```js
disabledCheckbox.setAttribute('disabled', true); // Делаем чекбокс неактивным. 
```

## Атрибуты без значения

Чтобы сделать чекбокс неактивным, нужно передать методу ```setAttribute``` два аргумента: ```disabled``` и любой другой. Согласно спецификации, у ```setAttribute``` есть два обязательных параметра, но в то же время ```disabled``` не предполагает никакого значения. Получается, чтобы метод сработал, второй аргумент необходим, но его значение неважно:

```js
disabledCheckbox.setAttribute('disabled', true);
disabledCheckbox.setAttribute('disabled', 'Значение этого аргумента может быть любым');
disabledCheckbox.setAttribute('disabled', 'Мы передаём его, только чтобы метод отработал');
disabledCheckbox.setAttribute('disabled', false); // и даже этот вызов сработает 
```

## Удаляем атрибут: метод ```removeAttribute```

Метод removeAttribute удаляет атрибут у элемента:

```js
bigAndRed.hasAttribute('disabled'); // true
bigAndRed.removeAttribute('disabled'); // удаляем атрибут
bigAndRed.hasAttribute('disabled'); // false 
```

